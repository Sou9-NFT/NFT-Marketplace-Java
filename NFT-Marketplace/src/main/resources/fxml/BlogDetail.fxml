<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.text.Text?>
<?import javafx.scene.effect.*?>

<AnchorPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="org.esprit.controllers.BlogDetailController"
            styleClass="root-pane" stylesheets="@../styles/main.css">

    <ScrollPane fitToWidth="true" AnchorPane.topAnchor="0.0" AnchorPane.bottomAnchor="0.0"
                AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0">
        <VBox spacing="20" styleClass="blog-detail-container">
            <!-- Header with back button -->
            <HBox spacing="20" alignment="CENTER_LEFT" styleClass="header-section">
                <padding>
                    <Insets top="20" right="30" bottom="20" left="30"/>
                </padding>
                <Button fx:id="backButton" text="â† Back to Blogs"
                        onAction="#handleBack" styleClass="secondary-button"/>
            </HBox>

            <!-- Blog Content -->
            <VBox spacing="20" styleClass="blog-content-section">
                <padding>
                    <Insets left="30" right="30" bottom="30"/>
                </padding>

                <!-- Author Info -->
                <HBox spacing="15" alignment="CENTER_LEFT" styleClass="author-section">
                    <ImageView fx:id="authorProfilePicture" fitHeight="50" fitWidth="50"
                               styleClass="profile-picture"/>
                    <VBox spacing="2">
                        <Label fx:id="authorNameLabel" styleClass="author-name"/>
                        <Label fx:id="postDateLabel" styleClass="post-date"/>
                    </VBox>
                </HBox>

                <!-- Blog Title -->
                <Text fx:id="blogTitleText" styleClass="blog-detail-title"/>

                <!-- Blog Image -->
                <ImageView fx:id="blogImage" fitWidth="800" preserveRatio="true"
                           styleClass="blog-detail-image"/>

                <!-- Blog Content -->
                <Text fx:id="blogContentText" styleClass="blog-detail-content"/>

                <!-- Comments Section -->
                <VBox spacing="15" styleClass="comments-section">
                    <Label text="Comments" styleClass="section-header"/>

                    <!-- New Comment -->
                    <HBox spacing="10" alignment="TOP_LEFT">
                        <ImageView fx:id="currentUserProfilePicture" fitHeight="40"
                                   fitWidth="40" styleClass="profile-picture"/>
                        <VBox spacing="5" HBox.hgrow="ALWAYS">
                            <TextArea fx:id="commentTextArea" promptText="Write a comment..."
                                      wrapText="true" prefRowCount="3"/>
                            <Button fx:id="addCommentButton" text="Add Comment"
                                    onAction="#handleAddComment" styleClass="primary-button"/>
                        </VBox>
                    </HBox>

                    <!-- Comments List -->
                    <ListView fx:id="commentsListView" VBox.vgrow="ALWAYS"
                              styleClass="comments-list"/>
                </VBox>
            </VBox>
        </VBox>
    </ScrollPane>
</AnchorPane>
