<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>

<ScrollPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="org.esprit.controllers.user.ProfileController"
            fitToWidth="true" fitToHeight="true">
    <VBox spacing="20" styleClass="form-container">
        <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
        
        <HBox alignment="CENTER" spacing="20">
            <ImageView fx:id="profileImageView" fitHeight="100" fitWidth="100" preserveRatio="true">
                <Image url="/images/default-profile.png"/>
            </ImageView>
            
            <VBox alignment="CENTER_LEFT" spacing="5">
                <Label fx:id="nameLabel" text="User Name" styleClass="form-title"/>
                <Label fx:id="emailLabel" text="user@example.com"/>
                <Label fx:id="balanceLabel" text="Balance: 0.000 ETH"/>
                <Button text="Upload Profile Picture" onAction="#handleUploadProfilePicture" styleClass="form-button"/>
            </VBox>
        </HBox>
        
        <TabPane tabClosingPolicy="UNAVAILABLE">
            <Tab text="Profile Information">
                <VBox spacing="15" padding="10">
                    <GridPane hgap="10" vgap="10">
                        <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
                        
                        <Label text="Name:" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                        <TextField fx:id="nameField" GridPane.columnIndex="1" GridPane.rowIndex="0" styleClass="form-field"/>
                        
                        <Label text="Email:" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                        <TextField fx:id="emailField" GridPane.columnIndex="1" GridPane.rowIndex="1" styleClass="form-field"/>
                        
                        <Label text="Wallet Address:" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                        <TextField fx:id="walletAddressField" GridPane.columnIndex="1" GridPane.rowIndex="2" styleClass="form-field"/>
                        
                        <Label text="GitHub Username:" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                        <TextField fx:id="githubUsernameField" GridPane.columnIndex="1" GridPane.rowIndex="3" styleClass="form-field"/>
                    </GridPane>
                    
                    <HBox alignment="CENTER" spacing="10">
                        <Button text="Save Changes" onAction="#handleSaveProfile" styleClass="form-button"/>
                    </HBox>
                </VBox>
            </Tab>
            
            <Tab text="Change Password">
                <VBox spacing="15" padding="10">
                    <GridPane hgap="10" vgap="10">
                        <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
                        
                        <Label text="Current Password:" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                        <PasswordField fx:id="currentPasswordField" GridPane.columnIndex="1" GridPane.rowIndex="0" styleClass="form-field"/>
                        
                        <Label text="New Password:" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                        <PasswordField fx:id="newPasswordField" GridPane.columnIndex="1" GridPane.rowIndex="1" styleClass="form-field"/>
                        
                        <Label text="Confirm New Password:" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                        <PasswordField fx:id="confirmPasswordField" GridPane.columnIndex="1" GridPane.rowIndex="2" styleClass="form-field"/>
                    </GridPane>
                    
                    <HBox alignment="CENTER" spacing="10">
                        <Button text="Change Password" onAction="#handleChangePassword" styleClass="form-button"/>
                    </HBox>
                </VBox>
            </Tab>
        </TabPane>
        
        <Label fx:id="statusLabel" textFill="green" alignment="CENTER" maxWidth="Infinity"/>
        <Label fx:id="errorLabel" textFill="red" alignment="CENTER" maxWidth="Infinity"/>
    </VBox>
</ScrollPane>